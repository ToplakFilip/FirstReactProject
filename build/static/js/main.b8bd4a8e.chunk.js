(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports={stats:"Stats_stats__2d4il",cardStats:"Stats_cardStats__m6uk_",pStyle:"Stats_pStyle__12aeR"}},,,function(e,t,n){e.exports={"expense-item":"ExpenseItem_expense-item__2tM5Y","expense-item__description":"ExpenseItem_expense-item__description__1c3oC","expense-item__price":"ExpenseItem_expense-item__price__3fe2l",buttonEdit:"ExpenseItem_buttonEdit__v50x4",button:"ExpenseItem_button__Gk3VD"}},,function(e,t,n){e.exports={register:"Register_register__1tdV3",control:"Register_control__2NgL3",invalid:"Register_invalid__zUxQD",actions:"Register_actions__2WWul",btn:"Register_btn__1UUWc"}},,function(e,t,n){e.exports={login:"Login_login__IftjE",btn:"Login_btn__2OTnS",control:"Login_control__3E0QL",invalid:"Login_invalid__31M4i",actions:"Login_actions__2rWrF"}},,function(e,t,n){e.exports={login:"Input_login__2mwFG",control:"Input_control__20r5d",invalid:"Input_invalid__1RVj8"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__gXZgC",modal:"Modal_modal__3wZXj","slide-down":"Modal_slide-down__21wOa"}},function(e,t,n){e.exports={card:"Card_card__1lWA1"}},function(e,t,n){e.exports={button:"Button_button__1nfDy"}},,function(e,t,n){e.exports={nav:"Navigation_nav__1XKuM"}},function(e,t,n){e.exports={"main-header":"MainHeader_main-header__3euv4"}},function(e,t,n){e.exports={"lds-circle":"Loader_lds-circle__rQRCG"}},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(16),s=n.n(a),r=(n(32),n(2)),c=n(1),i=n.n(c),o=n(21),l=n.n(o),u=n(0);var d=function(e){return Object(u.jsx)("div",{className:"".concat(l.a.card," ").concat(e.className),children:e.children})},j=n(17),b=n.n(j),p=n(22),m=n.n(p),x=function(e){return Object(u.jsx)("button",{type:e.type||"button",className:"".concat(m.a.button," ").concat(e.className),onClick:e.onClick,disabled:e.disabled,children:e.children})},h=n(19),f=n.n(h),v=function(e){return Object(u.jsxs)("div",{className:"".concat(f.a.control," ").concat(!1===e.isValid?f.a.invalid:""),children:[Object(u.jsx)("label",{htmlFor:e.id,children:e.label}),Object(u.jsx)("input",{type:e.type,id:e.id,value:e.value,onChange:e.onChange,onBlur:e.onBlur})]})},O=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:t.val.length>5}:"INPUT_BLUR"===t.type?{value:e.value,isValid:e.value.length>5}:{value:"",isValid:!1}},g=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:t.val.trim().length>6}:"INPUT_BLUR"===t.type?{value:e.value,isValid:e.value.trim().length>6}:{value:"",isValid:!1}},_=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useReducer)(O,{value:"",isValid:void 0}),o=Object(r.a)(i,2),l=o[0],j=o[1],p=Object(c.useReducer)(g,{value:"",isValid:void 0}),m=Object(r.a)(p,2),h=m[0],f=m[1],_=l.isValid,y=h.isValid;Object(c.useEffect)((function(){var e=setTimeout((function(){s(_&&y)}),1e3);return function(){clearTimeout(e)}}),[_,y]);var S=Object(u.jsx)("p",{});return S=!0===e.showErrorScreen?Object(u.jsx)("p",{color:"white",children:"No user found."}):Object(u.jsx)("p",{}),Object(u.jsxs)(d,{className:b.a.login,children:[Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onLogin(l.value,h.value),j(""),f("")},children:[Object(u.jsx)(v,{id:"username",type:"username",label:"Username",isValid:_,value:l.value,onChange:function(e){j({type:"USER_INPUT",val:e.target.value}),s(e.target.value.length>5&&h.isValid)},onBlur:function(){j({type:"INPUT_BLUR"})}}),Object(u.jsx)(v,{id:"password",type:"password",label:"Password",isValid:y,value:h.value,onChange:function(e){f({type:"USER_INPUT",val:e.target.value}),s(e.target.value.length>6&&l.isValid)},onBlur:function(){f({type:"INPUT_BLUR"})}}),S,Object(u.jsx)("div",{className:b.a.actions,children:Object(u.jsx)(x,{type:"submit",disabled:!a,children:"Login"})})]}),Object(u.jsx)("button",{type:"button",className:b.a.btn,onClick:function(){e.isRegisterScreen(!0)},children:"Switch to registration"})]})},y=n(15),S=n.n(y),w=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:t.val.length>5}:"INPUT_BLUR"===t.type?{value:e.value,isValid:e.value.length>5}:{value:"",isValid:!1}},N=function(e,t){return"USER_INPUT"===t.type?{value:t.val,isValid:t.val.trim().length>6}:"INPUT_BLUR"===t.type?{value:e.value,isValid:e.value.trim().length>6}:{value:"",isValid:!1}},I=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useReducer)(w,{value:"",isValid:void 0}),o=Object(r.a)(i,2),l=o[0],j=o[1],b=Object(c.useReducer)(N,{value:"",isValid:void 0}),p=Object(r.a)(b,2),m=p[0],h=p[1],f=l.isValid,O=m.isValid;Object(c.useEffect)((function(){var e=setTimeout((function(){s(f&&O)}),1e3);return function(){clearTimeout(e)}}),[f,O]);return Object(u.jsxs)(d,{className:S.a.register,children:[Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onRegister(l.value,m.value)},children:[Object(u.jsx)(v,{id:"username",type:"username",label:"Username",isValid:f,value:l.value,onChange:function(e){j({type:"USER_INPUT",val:e.target.value}),s(e.target.value.length>5&&m.isValid)},onBlur:function(){j({type:"INPUT_BLUR"})}}),Object(u.jsx)(v,{id:"password",type:"password",label:"Password",isValid:O,value:m.value,onChange:function(e){h({type:"USER_INPUT",val:e.target.value}),s(e.target.value.length>6&&l.isValid)},onBlur:function(){h({type:"INPUT_BLUR"})}}),Object(u.jsx)("div",{className:S.a.actions,children:Object(u.jsx)(x,{type:"submit",className:S.a.btn,disabled:!a,children:"Register"})})]}),Object(u.jsx)(x,{type:"button",className:S.a.btn,onClick:function(){e.isRegisterScreen(!1)},children:"Switch to login"})]})},E=n(6),C=n(3),T=(n(34),n(35),function(e){return Object(u.jsx)("div",{className:"expenses-filter",children:Object(u.jsxs)("div",{className:"expenses-filter__control",children:[Object(u.jsx)("label",{children:"Filter by year"}),Object(u.jsxs)("select",{value:e.selected,onChange:function(t){e.onChangeFilter(t.target.value)},children:[Object(u.jsx)("option",{value:"2023",children:"2023"}),Object(u.jsx)("option",{value:"2022",children:"2022"}),Object(u.jsx)("option",{value:"2021",children:"2021"}),Object(u.jsx)("option",{value:"2020",children:"2020"}),Object(u.jsx)("option",{value:"2019",children:"2019"})]})]})})}),U=i.a.createContext({user:{},items:[],totalAmount:0,isLoading:"",httpError:"",initialItems:function(e){},addItem:function(e){},removeItem:function(e){},changeItem:function(e){}}),L=n(20),k=n.n(L),R=function(e){return Object(u.jsx)("div",{className:k.a.modal,children:Object(u.jsx)("div",{className:k.a.content,children:e.children})})},V=document.getElementById("overlay-root"),A=function(e){return Object(u.jsx)(c.Fragment,{children:s.a.createPortal(Object(u.jsx)(R,{children:e.children}),V)})},M=function(e){var t=Object(c.useContext)(U),n=Object(c.useState)(e.title),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(e.amount),l=Object(r.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(e.date.toISOString().slice(0,10)),p=Object(r.a)(b,2),m=p[0],h=p[1];return Object(u.jsx)(A,{children:Object(u.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t.changeItem({id:e.id,title:s,amount:+d,date:new Date(m)}),i(""),j(""),h(""),e.onHideChangeExp()},children:[Object(u.jsxs)("div",{className:"new-expense__controls",children:[Object(u.jsxs)("div",{className:"new-expense__control",children:[Object(u.jsx)("label",{children:"Title"}),Object(u.jsx)("input",{type:"text",value:s,onChange:function(e){i(e.target.value)}})]}),Object(u.jsxs)("div",{className:"new-expense__control",children:[Object(u.jsx)("label",{children:"Amount"}),Object(u.jsx)("input",{type:"number",min:"0.01",step:"0.01",value:d,onChange:function(e){j(e.target.value)}})]}),Object(u.jsxs)("div",{className:"new-expense__control",children:[Object(u.jsx)("label",{children:"Date"}),Object(u.jsx)("input",{type:"date",min:"2019-01-01",step:"2022-12-31",value:m,onChange:function(e){h(e.target.value)}})]})]}),Object(u.jsxs)("div",{className:"new-expense__actions",children:[Object(u.jsx)(x,{type:"submit",children:"Edit Expense"}),Object(u.jsx)(x,{onClick:e.onHideChangeExp,children:"Cancel"})]})]})})},P=n(13),D=n.n(P);n(36);var B=function(e){var t=e.date.toLocaleString("en-US",{month:"long"}),n=e.date.toLocaleString("en-US",{day:"2-digit"}),a=e.date.getFullYear();return Object(u.jsxs)("div",{className:"expense-date",children:[Object(u.jsx)("div",{className:"expense-date__month",children:t}),Object(u.jsx)("div",{className:"expense-date__year",children:a}),Object(u.jsx)("div",{className:"expense-date__day",children:n})]})};var F=function(e){var t=Object(c.useContext)(U),n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=a[0],i=a[1];return Object(u.jsxs)("li",{children:[s&&Object(u.jsx)(M,{id:e.id,title:e.title,amount:e.amount,date:e.date,onHideChangeExp:function(){i(!1)}}),Object(u.jsxs)(d,{className:D.a["expense-item"],children:[Object(u.jsx)(B,{date:e.date}),Object(u.jsx)("div",{className:D.a["expense-item_description"]}),Object(u.jsx)("h2",{children:e.title}),Object(u.jsxs)("div",{children:[Object(u.jsx)(x,{className:D.a.buttonEdit,onClick:function(e){t.removeItem(e)}.bind(null,e.id),children:"Remove"}),Object(u.jsx)(x,{className:D.a.buttonEdit,onClick:function(){i(!0)},children:"Edit"})]}),Object(u.jsxs)("div",{className:D.a["expense-item__price"],children:["\u20ac",e.amount]})]})]})};n(37);var J=function(e){return 0===e.items.length?Object(u.jsx)("p",{className:"expenses-list__fallback",children:"No Expenses found."}):Object(u.jsx)("ul",{className:"expenses-list",children:e.items.map((function(e){return Object(u.jsx)(F,{id:e.id,title:e.title,amount:e.amount,date:e.date},e.id)}))})},G=(n(38),n(23));var H=function(e){var t="0%";e.maxValue>0&&(t=Math.round(e.value/e.maxValue*100)+"%");var n="Total cost: \n"+e.value.toFixed(2);return Object(u.jsxs)("div",{className:"chart-bar","data-tip":n,children:[Object(u.jsx)("div",{className:"chart-bar__inner",children:Object(u.jsx)("div",{className:"chart-bar__fill",style:{height:t}})}),Object(u.jsx)("div",{className:"chart-bar__label",children:e.label}),Object(u.jsx)(G.a,{backgroundColor:"#2D3047"})]})};n(42);var W=function(e){return Object(u.jsx)("div",{className:"chart",children:e.dataPoints.map((function(t){return Object(u.jsx)(H,{value:t.value,maxValue:e.totalSum,label:t.label},t.label)}))})},z=n(10),X=n.n(z),Q=function(e){return Object(u.jsxs)("div",{className:X.a.stats,children:[Object(u.jsxs)(d,{className:X.a.cardStats,children:[Object(u.jsx)("h3",{className:X.a.pStyle,children:"TOTAL COST"}),Object(u.jsxs)("p",{className:X.a.pStyle,children:["\u20ac",e.statistics.totalSum]})]}),Object(u.jsxs)(d,{className:X.a.cardStats,children:[Object(u.jsx)("h3",{className:X.a.pStyle,children:"HIGHEST EXPENSE"}),Object(u.jsxs)("p",{className:X.a.pStyle,children:["\u20ac",e.statistics.highestExpense.toFixed(2)]})]}),Object(u.jsxs)(d,{className:X.a.cardStats,children:[Object(u.jsx)("h3",{className:X.a.pStyle,children:"AVERAGE COST"}),Object(u.jsxs)("p",{className:X.a.pStyle,children:["\u20ac",e.statistics.averageCost.toFixed(2)]})]})]})},Y=n(27),Z=n(8);Z.d.register(Z.c,Z.h,Z.j,Z.g);var K=function(e){var t,n=[0,0,0,0,0,0,0,0,0,0,0,0],a=Object(C.a)(e.expenses);try{for(a.s();!(t=a.n()).done;){var s=t.value;n[s.date.getMonth()]+=s.amount}}catch(c){a.e(c)}finally{a.f()}var r={labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Line graph",data:n,backgroundColor:"#E84855",borderColor:"#E84855",fill:!1,stepped:!0}]};return Object(u.jsx)(Y.a,{data:r})};var q=function(e){var t=Object(c.useContext)(U),n=Object(c.useState)("2020"),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)([]),l=Object(r.a)(o,2),j=l[0],b=l[1];Object(c.useEffect)((function(){e.initializeItems&&void 0!==t.items&&b(t.items.filter((function(e){return e.date.getFullYear().toString()===s})))}),[t.items,s,b,e.initializeItems]);var p,m=[{label:"Jan",value:0},{label:"Feb",value:0},{label:"Mar",value:0},{label:"Apr",value:0},{label:"May",value:0},{label:"Jun",value:0},{label:"Jul",value:0},{label:"Aug",value:0},{label:"Sep",value:0},{label:"Oct",value:0},{label:"Nov",value:0},{label:"Dec",value:0}],x=Object(C.a)(j);try{for(x.s();!(p=x.n()).done;){var h=p.value;m[h.date.getMonth()].value+=h.amount}}catch(_){x.e(_)}finally{x.f()}var f=m.map((function(e){return e.value})),v=f.reduce((function(e,t){return e+t}),0).toFixed(2),O={totalSum:v,highestExpense:Math.max.apply(Math,Object(E.a)(f)),averageCost:f.reduce((function(e,t){return e+t}),0)/f.length},g=Object(u.jsx)("p",{className:"expenses-list__fallback",children:"No Expenses found."});return g=t.httpError?Object(u.jsx)("p",{className:"expenses-list__fallback",children:t.httpError}):t.isLoading?Object(u.jsx)("p",{className:"expenses-list__fallback",children:"Loading..."}):Object(u.jsx)(J,{items:j}),Object(u.jsxs)(d,{className:"expenses",children:[Object(u.jsx)(T,{selected:s,onChangeFilter:function(e){i(e)}}),Object(u.jsx)(W,{dataPoints:m,totalSum:v}),Object(u.jsx)(Q,{dataPoints:m,statistics:O}),g,Object(u.jsx)(K,{expenses:j})]})};n(43);var $=function(e){var t=Object(c.useContext)(U),n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(""),l=Object(r.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(""),p=Object(r.a)(b,2),m=p[0],x=p[1];return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.addItem({id:Math.random().toString(),title:s,amount:+d,date:new Date(m)}),i(""),j(""),x("")},children:[Object(u.jsxs)("div",{className:"new-expense__controls",children:[Object(u.jsxs)("div",{className:"new-expense__control",children:[Object(u.jsx)("label",{children:"Title"}),Object(u.jsx)("input",{type:"text",value:s,onChange:function(e){i(e.target.value)}})]}),Object(u.jsxs)("div",{className:"new-expense__control",children:[Object(u.jsx)("label",{children:"Amount"}),Object(u.jsx)("input",{type:"number",min:"0.01",step:"0.01",value:d,onChange:function(e){j(e.target.value)}})]}),Object(u.jsxs)("div",{className:"new-expense__control",children:[Object(u.jsx)("label",{children:"Date"}),Object(u.jsx)("input",{type:"date",min:"2019-01-01",step:"2022-12-31",value:m,onChange:function(e){x(e.target.value)}})]})]}),Object(u.jsxs)("div",{className:"new-expense__actions",children:[Object(u.jsx)("button",{onClick:e.onCancel,children:"Cancel"}),Object(u.jsx)("button",{type:"submit",children:"Add Expense"})]})]})};n(44);var ee=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(u.jsxs)("div",{className:"new-expense",children:[!n&&Object(u.jsx)("button",{onClick:function(){a(!0)},children:"Add new Expense"}),n&&Object(u.jsx)($,{onCancel:function(){a(!1)}})]})},te=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],s=n[1],o=Object(c.useContext)(U);return Object(c.useEffect)((function(){return e.getInitialItems&&(o.initialItems({user:localStorage.getItem("username")}),s(!0)),function(){}}),[]),Object(u.jsxs)(i.a.Fragment,{children:[Object(u.jsx)(ee,{}),Object(u.jsx)(q,{initializeItems:a})]})},ne=i.a.createContext({user:[],isLoading:"",httpError:"",isLoggedIn:!1,onLogout:function(){},addUser:function(){},loginUser:function(){}}),ae=n(24),se=n.n(ae),re=function(e){var t=Object(c.useContext)(ne);return Object(u.jsx)("nav",{className:se.a.nav,children:Object(u.jsxs)("ul",{children:[t.isLoggedIn&&Object(u.jsx)("li",{children:Object(u.jsx)("p",{children:localStorage.getItem("username")})}),t.isLoggedIn&&Object(u.jsx)("li",{children:Object(u.jsx)("button",{onClick:t.onLogout,children:"Logout"})})]})})},ce=n(25),ie=n.n(ce),oe=function(e){return Object(u.jsxs)("header",{className:ie.a["main-header"],children:[Object(u.jsx)("h1",{children:"Monthly expenses"}),Object(u.jsx)(re,{})]})},le=n(26),ue=n.n(le),de=function(){var e,t=Object(c.useContext)(ne),n=Object(c.useState)(!1),a=Object(r.a)(n,2),s=(a[0],a[1]),o=Object(c.useState)(!1),l=Object(r.a)(o,2),d=l[0],j=l[1],b=Object(c.useState)(!1),p=Object(r.a)(b,2),m=p[0],x=(p[1],function(e){j(e)});return Object(c.useEffect)((function(){"1"===localStorage.getItem("isLoggedIn")&&(s(!0),t.isLoggedIn=!0)}),[]),e=t.isLoggedIn?Object(u.jsx)(te,{getInitialItems:t.isLoggedIn}):!1===d?Object(u.jsx)(_,{onLogin:function(e,n){t.loginUser({username:e,password:n}),null!==t.user&&void 0!==t.user&&s(!0)},isRegisterScreen:x,showErrorScreen:m}):Object(u.jsx)(I,{onRegister:function(e,n){t.addUser({username:e,password:n}),s(!0)},isRegisterScreen:x}),Object(u.jsxs)(i.a.Fragment,{children:[Object(u.jsx)(oe,{}),Object(u.jsxs)("main",{children:[e," ",t.isLoading&&Object(u.jsx)("div",{className:ue.a["lds-circle"],children:Object(u.jsx)("div",{})})]})]})};var je=function(){return Object(u.jsx)(de,{})},be=n(9),pe=n(5),me=n.n(pe),xe=function(e){var t=Object(c.useState)(),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(r.a)(i,2),l=o[0],d=o[1],j=Object(c.useState)(),b=Object(r.a)(j,2),p=b[0],m=b[1],x=Object(c.useState)(!1),h=Object(r.a)(x,2),f=h[0],v=h[1];function O(){return(O=Object(be.a)(me.a.mark((function e(t){var n,a,r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://expenses-ce488-default-rtdb.europe-west1.firebasedatabase.app/expenses/".concat(t.username,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t.password})});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,n.json();case 7:return a=e.sent,r={key:a.name,username:t.username,password:t.password},s(r),localStorage.setItem("isLoggedIn",1),localStorage.setItem("userId",r.username),localStorage.setItem("username",r.username),v(!0),d(!1),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(be.a)(me.a.mark((function e(t){var n,a,r,c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://expenses-ce488-default-rtdb.europe-west1.firebasedatabase.app/expenses/".concat(t.username,".json"),e.next=3,fetch(n,{method:"GET",headers:{"Content-Type":"application/json"},body:JSON.stringify()});case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Something went wrong!");case 6:return e.next=8,a.json();case 8:r=e.sent,c={key:r.name,username:t.username,password:r.password},t.password===r.password&&(s(c),localStorage.setItem("isLoggedIn",1),localStorage.setItem("userId",c.username),localStorage.setItem("username",c.username),v(!0)),d(!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _={user:a,isLoading:l,httpError:p,addUser:function(e){d(!0),function(e){return O.apply(this,arguments)}(e).catch((function(e){d(!1),m(e.message)}))},loginUser:function(e){d(!0),function(e){return g.apply(this,arguments)}(e).catch((function(e){d(!1),m(e.message)}))},isLoggedIn:f,onLogout:function(){localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userId"),localStorage.removeItem("username"),s(void 0),v(!1),window.location.reload()}};return Object(u.jsx)(ne.Provider,{value:_,delayUpdate:!0,children:e.children})},he=function(){var e=Object(be.a)(me.a.mark((function e(t){var n,a,s,r,c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a=0,s={},r="",c=function(){var e=Object(be.a)(me.a.mark((function e(){var c,i,o,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://expenses-ce488-default-rtdb.europe-west1.firebasedatabase.app/expenses/".concat(t,".json"),{method:"GET",body:JSON.stringify()});case 2:if((c=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,c.json();case 7:for(o in i=e.sent)"password"!==o&&(n.push({id:o,title:i[o].title,amount:+i[o].amount,date:new Date(i[o].date)}),a+=i[o].amount);return s={username:t,password:i.password},l={items:n,totalAmount:a,user:s},e.abrupt("return",{expenses:l,httpError:r});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=5,e.next=8,c();case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(5),r=e.t0.message;case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),fe=he,ve=function(e,t){var n,a;if("INITIAL_ITEMS"===t.type)return{items:n=t.items,totalAmount:a=t.totalAmount,user:t.user};if("ADD_ITEM"===t.type)return a=e.totalAmount+t.item.amount,{items:n=e.items.concat(t.item),totalAmount:a,user:e.user};if("CHANGE_ITEM"===t.type){var s=e.items.findIndex((function(e){return e.id===t.item.id}));return a=e.totalAmount-e.items[s].amount+t.item.amount,(n=Object(E.a)(e.items))[s]=t.item,{items:n,totalAmount:a,user:e.user}}if("REMOVE_ITEM"===t.type){var r=e.items.findIndex((function(e){return e.id===t.id})),c=e.items[r];return a=e.totalAmount-c.amount,{items:n=e.items.filter((function(e){return e.id!==t.id})),totalAmount:a,user:e.user}}},Oe=function(e){var t=Object(c.useReducer)(ve,[]),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(!1),o=Object(r.a)(i,2),l=o[0],d=o[1],j=Object(c.useState)(),b=Object(r.a)(j,2),p=b[0],m=b[1],x=function(){var e=Object(be.a)(me.a.mark((function e(t){var n,a,r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,fe(t.user);case 3:n=e.sent,a=n.expenses,r=n.httpError,d(!1),m(r),s({type:"INITIAL_ITEMS",items:a.items,totalAmount:a.totalAmount,user:a.user});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(be.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,v(t,a.user.username);case 3:t=e.sent,d(!1),s({type:"ADD_ITEM",item:t});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function f(){return(f=Object(be.a)(me.a.mark((function e(t,n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://expenses-ce488-default-rtdb.europe-west1.firebasedatabase.app/expenses/".concat(n,"/").concat(t.id,".json"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Something went wrong!");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=function(){var e=Object(be.a)(me.a.mark((function e(t,n){var a,s,r;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://expenses-ce488-default-rtdb.europe-west1.firebasedatabase.app/expenses/".concat(n,".json"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,a.json();case 7:return s=e.sent,{},r={id:s.name,title:t.title,amount:+t.amount,date:new Date(t.date)},e.abrupt("return",{id:r.id,title:r.title,amount:r.amount,date:r.date});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function O(){return(O=Object(be.a)(me.a.mark((function e(t,n){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://expenses-ce488-default-rtdb.europe-west1.firebasedatabase.app/expenses/".concat(n,"/").concat(t,".json"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(e.sent.ok){e.next=5;break}throw new Error("Something went wrong!");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g={user:a.user,items:a.items,totalAmount:a.totalAmount,isLoading:l,httpError:p,initialItems:x,addItem:h,removeItem:function(e){!function(e,t){O.apply(this,arguments)}(e,a.user.username),s({type:"REMOVE_ITEM",id:e})},changeItem:function(e){!function(e,t){f.apply(this,arguments)}(e,a.user.username),s({type:"CHANGE_ITEM",item:e})}};return Object(u.jsx)(U.Provider,{value:g,delayUpdate:!0,children:e.children})};s.a.render(Object(u.jsx)(xe,{children:Object(u.jsx)(Oe,{children:Object(u.jsx)(je,{})})}),document.getElementById("root"))}],[[46,1,2]]]);
//# sourceMappingURL=main.b8bd4a8e.chunk.js.map